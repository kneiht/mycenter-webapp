{% extends "layouts/base.html" %}
{% load static %}

{% block title %} Home {% endblock %}


{% block extra_script %}
    <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
    <script src="{% static 'js/main.js' %}"></script>
{% endblock %}






{% block display %}
<p class="text-2xl font-semibold ">{% block page_title %}{% endblock %}</p>

<div id="sidebarLayout" class="fixed top-0 p-3 z-10 transition-all duration-1000 ease-in-out sm:left-0 -left-72">
    {% include 'components/sidebar.html' %}
</div>

<div class="pt-3 pr-8 pl-4 sm:pl-[115px]">
    {% include 'components/navbar.html' %}
</div>

<main class="pt-8 pb-8 px-4 sm:pl-[115px]">
    <div id="controls">
        {% include 'components/dbtoolbar.html' %}
    </div>

    
    <div class="data-display py-10" id="cardView">
        <div id="lazy_load_card_data_display" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 flex items-center justify-start gap-4">
            <div class="card bg-accent rounded-2xl shadow-lg w-full h-40">
              
            </div>


  {% for record in records %}
    <div id="card{{ record.id }}" class="searchable col-lg-4 col-md-6 col-sm-12 mb-3">
      <div class="card card-record h-100">
        <div class="card-header">
          <div class="row d-flex align-items-center">
            <div class="col-11">

                <span class="text-uppercase text-secondary text-xs font-weight-bolder">
                  {% if model_name == "financialtransaction" %}
                    {{ record.id }} - {{ record.create_date|date:"d/m/Y H:i" }} - {{ record.get_transaction_type_display }}

                  {% elif model_name == "databasechangelog" %}
                    {{ record.change_date|date:"d/m/Y H:i" }} - {{ record.model_name }} - ID{{ record.record_id }} - {{ record.change }}

                  {% else %}
                    {{ record.id }} - {{ record }}
                  {% endif %}
                </span>


            </div>
            <div class="col-1">
              <div class="dropdown top-right-postion">
                <a class="cursor-pointer" id="dropdownTable" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fa fa-ellipsis-v text-secondary" aria-hidden="true me-2"></i>
                </a>
                <ul class="dropdown-menu dropdown-menu-end px-2 py-1" aria-labelledby="dropdownMenuButton">
                  <li>
                    <a class="create-modal-form dropdown-item border-radius-md" data-id-record="{{ record.id }}" data-model-name="{{ model_name }}">
                      <div class="d-flex py-1">
                        <div class="my-auto">
                          <img src="{% static 'img/icons/edit.png' %}" class="avatar avatar-xs me-3">
                        </div>
                        <div class="d-flex flex-column justify-content-center">
                          <span class="font-weight-bold">Edit</span>
                        </div>
                      </div>
                    </a>
                  </li>

                  {% if model_name == "student" %}
                  <li>
                    <a class="create-modal-form dropdown-item border-radius-md" data-id-record="" data-model-name="pay_tuition" data-student-id="{{ record.id }}">
                      <div class="d-flex py-1">
                        <div class="my-auto">
                          <img src="{% static 'img/icons/money.png' %}" class="avatar avatar-xs me-3">
                        </div>
                        <div class="d-flex flex-column justify-content-center">
                          <h6 class="text-sm font-weight-normal mb-1">
                            <span class="font-weight-bold">Pay tuittion fee</span>
                          </h6>
                        </div>
                      </div>
                    </a>
                  </li>

                  <li>
                    <a href="{% url 'student_attendance_calendar' record.id %}" class="create-modal-form dropdown-item border-radius-md" target="_blank" rel="noopener noreferrer">
                      <div class="d-flex py-1">
                        <div class="my-auto">
                          <img src="{% static 'img/icons/calendar.png' %}" class="avatar avatar-xs me-3">
                        </div>
                        <div class="d-flex flex-column justify-content-center">
                          <h6 class="text-sm font-weight-normal mb-1">
                            <span class="font-weight-bold">Attendance calendar</span>
                          </h6>
                        </div>
                      </div>
                    </a>
                  </li>
                  {% endif %}


                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="card-body">
          <div class="row">
            {% if model_name == "course" %}
            <p class="text-info text-sm">
              <span style="margin: 3px;" class="icon text-info text-sm"><i class="fas fa-clock"></i></span>
              <span class="text"> {{ record.hours }} (hours)</span>
            </p>
            <p class="text-info text-sm">
              <span style="margin: 3px;" class="icon text-info text-sm"><i class="fas fa-book"></i></span>
              <span class="text"> {{ record.books }}</span>
            </p>
            <p class="text-info text-sm"> 
              <span style="margin: 3px;" class="icon text-info text-sm"><i class="fas fa-info-circle"></i></span>
              <span class="text"> {{ record.description }}</span>
            </p>

            {% elif model_name == "databasechangelog" %}
            <p class="text-info text-sm">
              <span class="text-info text-sm"> OLD: </span>
              <span class="text"> {{ record.old_data }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="text-info text-sm"> NEW: </span>
              <span class="text"> {{ record.new_data }}</span>
            </p>


            {% elif model_name == "classschedule" %}
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-clock"></i></span>
              <span class="text"> {{ record.daytime }}</span>
            </p>




            {% elif model_name == "tuitionplan" %}
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-dollar-sign"></i></span>
              <span class="text"> {{ record.price }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-hourglass-half"></i></span>
              <span class="text"> {{ record.number_of_hours }} (hours)</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-sticky-note"></i></span>
              <span class="text"> {{ record.note }}</span>
            </p>



            {% elif model_name == "userprofile" %}
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-id-badge"></i></span>
              <span class="text"> {{ record.user.username }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-signature"></i></span>
              <span class="text"> {{ record.name }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-venus-mars"></i></span>
              <span class="text"> {{ record.get_gender_display }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-birthday-cake"></i></span>
              <span class="text"> {{ record.date_of_birth }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-phone"></i></span>
              <span class="text"> {{ record.phone }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-comment-alt"></i></span>
              <span class="text"> {{ record.note }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-image"></i></span>
              <span class="text"> {{ record.image.url }}</span>
            </p>


            {% elif model_name == "class" %}
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-id-badge"></i></span>
              <span class="text"> {{ record.id }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-chalkboard-teacher"></i></span>
              <span class="text"> {{ record.name }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-book-open"></i></span>
              <span class="text"> {{ record.course.name }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-calendar-alt"></i></span>
              <span class="text"> {{ record.schedule.name }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-user-tie"></i></span>
              <span class="text"> {{ record.teacher.username }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-toggle-on"></i></span>
              <span class="text"> {{ record.status }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-users"></i></span>
              <span class="text"> {{ record.students.all|join:", " }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-sticky-note"></i></span>
              <span class="text"> {{ record.note }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-image"></i></span>
              <span class="text"> {{ record.image.url }}</span>
            </p>
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-calendar-plus"></i></span>
              <span class="text"> {{ record.create_date|date:"d/m/Y H:i" }}</span>
            </p>


            {% elif model_name == "student" %}
            <div class="container">
                <div class="row">
                    <div class="col-6">

                      <p class="text-info text-sm flex-grow-1">
                        <span class="badge badge-sm bg-status-{{ record.status }} text-xxs">{{ record.get_status_display }}</span>
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span style="margin-right: 3px;" class="icon text-info text-sm"><i class="fas fa-clock"></i></span>
                        <span class="text"> Hours: {{ record.total_paid_hours_remaining }} (hours)</span>
                      </p>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row">
                    <div class="col-6">
                      <p class="text-info text-sm flex-grow-1">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-venus-mars"></i></span>
                        <span class="text"> {{ record.get_gender_display }}</span>
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm flex-grow-1">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-birthday-cake"></i></span>
                        <span class="text"> {{ record.date_of_birth|date:"d/m/Y" }}</span>
                      </p>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row">
                    <div class="col-6">
                      <p class="text-info text-sm flex-grow-1">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-user-friends"></i></span>
                        <span class="text"> {{ record.parents }}</span>
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm flex-grow-1">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-phone"></i></span>
                        <span class="text"> {{ record.phone }}</span>
                      </p>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row">
                    <div class="col-6">
                      <p class="text-info text-sm flex-grow-1">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-school"></i></span>
                        <span class="text"> {{ record.school }}</span>
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-calendar-plus"></i></span>
                        <span class="text"> {{ record.create_date|date:"d/m/Y H:i" }}</span>
                      </p>  
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row">
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-users"></i></span>
                        {% for class in record.classes.all %}
                            <span class="text"> {{ class.name }} {% if class in record.paid_classes %} (chargeable){% endif %}{% if not forloop.last %}, {% endif %}</span>
                        {% endfor %}
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-money-bill-wave"></i></span>
                        <span class="text"> GEN8 Dollars: {{ record.money }}</span>
                      </p>
                    </div>
                </div>
            </div>

            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-sticky-note"></i></span>
              <span class="text"> {{ record.note }}</span>
            </p>







            {% elif model_name == "discount" %}
            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-calculator"></i></span>
              <span class="text"> {{ record.discount_value }}%</span>
            </p>




            {% elif model_name == "financialtransaction" %}
            <div class="container">
                <div class="row">
                    <div class="col-6">

                      <p class="text-info text-sm flex-grow-1">
                        <span class="badge badge-sm bg-{{ record.income_or_expense }} text-xxs">{{ record.get_income_or_expense_display }}</span>
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span style="margin-right: 3px;" class="icon text-info text-sm"><i class="fas fa-clock"></i></span>
                        <span class="text"> {{ record.amount }}</span>
                      </p>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row">
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-wallet"></i></span>
                        <span class="text"> {{ record.get_transaction_type_display }}</span>
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-user-tie"></i></span>
                        <span class="text"> {{ record.permission_giver.username }}</span>
                      </p>
                    </div>
                </div>
            </div>


            <div class="container">
                <div class="row">
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-sign-out-alt"></i></span>
                        <span class="text"> {{ record.giver }}</span>
                      </p>
                    </div>
                    <div class="col-6">
                      <p class="text-info text-sm">
                        <span class="icon icon-in-card text-info text-sm"><i class="fas fa-sign-in-alt"></i></span>
                        <span class="text"> {{ record.receiver }}</span>
                      </p>
                    </div>
                </div>
            </div>


            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-comment-alt"></i></span>
              <span class="text"> {{ record.note }}</span>
            </p>

            <p class="text-info text-sm">
              <span class="icon icon-in-card text-info text-sm"><i class="fas fa-image"></i></span>
              {% for image in record.images.all %}
                  <a href="{{ image.image.url }}" target="_blank"> 
                    <span class="text-info text-sm me-3"> Image{{ forloop.counter }}</span>
                  </a>
              {% endfor %}
            </p>



            {% endif %}
          </div>
        </div>
      </div>
    </div>
  {% endfor %}




        </div>
    </div>
</main>



{% endblock %}










